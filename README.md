Telegram Mini App –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω‚Äë–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π: –∞–Ω–∫–µ—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ ‚Üí –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π QR ‚Üí —Å–∫–∞–Ω QR ‚Üí ‚Äú–º–æ–∏ –≤—Å—Ç—Ä–µ—á–∏‚Äù ‚Üí –∑–∞–º–µ—Ç–∫–∏/–æ—Ü–µ–Ω–∫–∏.

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

1) –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
npm install
```

2) –°–æ–∑–¥–∞—Ç—å `.env` (–º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `.env.example`):

```bash
cp .env.example .env
```

3) –ü–æ–¥–Ω—è—Ç—å Postgres (–Ω–∞–ø—Ä–∏–º–µ—Ä, `docker compose up -d postgres`) –∏ —É–∫–∞–∑–∞—Ç—å `POSTGRES_URL`.

4) –ó–∞–ø—É—Å—Ç–∏—Ç—å dev‚Äë—Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev
```

–û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000`.

## Telegram –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

- –í–Ω—É—Ç—Ä–∏ Telegram WebApp –∑–∞–ø—Ä–æ—Å—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è `initData`. Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç `initData` —Å –ø–æ–º–æ—â—å—é `TELEGRAM_BOT_TOKEN`.
- –õ–æ–∫–∞–ª—å–Ω–æ (–≤ –±—Ä–∞—É–∑–µ—Ä–µ) –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ Telegram: `DEV_ALLOW_MOCK_AUTH=1`, –∞ id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ—Ä—ë—Ç—Å—è –∏–∑ `DEV_TELEGRAM_ID` –∏–ª–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `x-dev-telegram-id`.

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram:
- –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ `@BotFather`, –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∏ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –µ–≥–æ –≤ `TELEGRAM_BOT_TOKEN`.
- –ü–æ–¥–∫–ª—é—á–∏—Ç—å Mini App URL –∫ –±–æ—Ç—É (WebApp) –∏ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ Telegram.

## –ë–æ—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ª–∞—É–Ω—á–µ—Ä –±–æ—Ç–∞ –ª–µ–∂–∏—Ç –≤ `bot/bot.ts`.

```bash
npm run bot
```

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `TELEGRAM_BOT_TOKEN`, `WEBAPP_URL` (–¥–ª—è Telegram –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `https://...`), `DEFAULT_EVENT_SLUG`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `WELCOME_TEXT`, `CONTACT_TEXT`.

## –•—Ä–∞–Ω–∏–ª–∏—â–µ

- Postgres: —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–µ—Ä—ë—Ç—Å—è –∏–∑ `POSTGRES_URL` (–¥–ª—è Vercel Postgres –∑–∞–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
- –§–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Vercel Blob (`BLOB_READ_WRITE_TOKEN`).

## –ò–≤–µ–Ω—Ç—ã

- –¢–µ–∫—É—â–∏–π –∏–≤–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ `eventSlug` (localStorage) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ backend –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `x-event-slug`.
- –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å `?event=<slug>` –≤ URL ‚Äî –æ–Ω —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DEFAULT_EVENT_SLUG`.
- –î–ª—è –∞–≤—Ç–æ‚Äë—Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏–≤–µ–Ω—Ç–æ–≤ –≤–∫–ª—é—á–∏—Ç–µ `ALLOW_PUBLIC_EVENT_CREATE=1` (–∏–Ω–∞—á–µ –±—É–¥–µ—Ç `event_not_found`).
- –î–ª—è –¥–µ–º–æ-–Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ —Å–ø–∏–∫–µ—Ä–æ–≤ –≤–∫–ª—é—á–∏—Ç–µ `SEED_DEMO=1` (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ø—É—Å—Ç–∞—è).

## –ú–µ–Ω—é

- `üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è`: –∞–Ω–∫–µ—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞ + –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ.
- `üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏`: –∫–∞—Ç–∞–ª–æ–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏.
- `üé§ –°–ø–∏–∫–µ—Ä—ã`: —Å–ø–∏—Å–æ–∫ —Å–ø–∏–∫–µ—Ä–æ–≤ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É).
- `üóìÔ∏è –ü—Ä–æ–≥—Ä–∞–º–º–∞`: —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É).
- `üí¨ –ß–∞—Ç`: —Å—Å—ã–ª–∫–∞ –Ω–∞ —á–∞—Ç (–≤—ã–¥–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º; —Å—Å—ã–ª–∫–∞ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ).
- `ü§ù –ó–Ω–∞–∫–æ–º—Å—Ç–≤–∞`: —Å–ø–∏—Å–æ–∫ –æ—Ç—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤.
- `üë§ –Ø`: –ø—Ä–æ—Ñ–∏–ª—å + –∫–Ω–æ–ø–∫–∞ QR.

## QR —Ñ–æ—Ä–º–∞—Ç

QR –≤—ã–¥–∞—ë—Ç—Å—è —Å backend —á–µ—Ä–µ–∑ `GET /api/qr` –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–æ–∫—É `pe:<eventSlug>:<publicId>:<ts>:<sig>` (HMAC SHA-256, –∫–ª—é—á `QR_SECRET`).
–î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å `ALLOW_UNSIGNED_QR=1` (—Ç–æ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç `pe:<eventSlug>:<publicId>` / `pe:<publicId>`).

## –ê–¥–º–∏–Ω–∫–∞

- –í–∫–ª—é—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø: `ADMIN_TELEGRAM_IDS="123,456"` (Telegram user id —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é).
- –û—Ç–∫—Ä–æ–π—Ç–µ `/admin` –≤–Ω—É—Ç—Ä–∏ Mini App: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–∞—Ç–∞, —Å–ø–∏–∫–µ—Ä—ã, –ø—Ä–æ–≥—Ä–∞–º–º–∞.
